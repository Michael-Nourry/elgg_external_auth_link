Auteur : Nourry Michaël
Afficher un lien vers un site (http://www.monsite.com/) avec pour valeur http://www.monsite.com/n=name&m=mail&k=token
valable pendant une limite de temps fixée (TimeOut).
Le lien est modifié (en AJAX) avec le timing fixé par TimeOut

 Détails des options :

    Texte du lien : Ce qui s'affiche dans la barre ou ailleurs
    URL : Site de destination (http://www.monsite.com/upload?) au final le lien sera : URL.n=name&m=email&k=token
    Secret : Le secret partagé pour le cryptage
    TimeOut : Durée, en seconde, de la validité du token
    Groupe : Groupe ayant le lien dans la bar
    Sélecteur CSS : Pour pouvoir placer le lien

    Pour avoir plusieurs liens il suffit de séparer les sites par un ; dans chaque champs
                        (saut de ligne possible). 
                        Par exmple pour deux liens :
                       - Texte du lien : textlien1;textlien2
                        - URL : http://lien1/;http://lien2/
                        - Secret : secret1;secret2
                        - TimeOut : 10;30
                        - Groupe : groupe1;groupe2
                        - Sélecteur CSS : #elgg_topbar_container_left;#tutu




NOTE : 
Pour vérifier le  token :
function verifyToken($token, $data, $salt, $life)
{

    $time = time();

    if ($token == sha1($data . $salt . $time))
        return true;

    for ($offset = 1; $offset <= $life; $offset++)
        if ($token == sha1($data . $salt . ($time - $offset)))
            return true;
   
    return false;
}

if(verifyToken($token, $name.$email, $secret, $timeout))
{
    echo "OUI";
}else{
    echo "non";
}